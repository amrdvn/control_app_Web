FCM_SERVER_KEY=data() {
    return {
      title: '',
      body: ''
    }
  },
  methods: {
    async submit() {
      try {
        const user = firebase.auth().currentUser
        if (!user) {
          throw new Error('Kullanıcı oturum açmamış.')
        }
        const uid = user.uid

        const docRef = await firebase.firestore().collection('users').doc(uid).get()
        const userData = docRef.data()

        if (!userData || !userData.token) {
          throw new Error('Kullanıcının bildirim token\'ı yok.')
        }

        const token = userData.token

        const message = {
          notification: {
            title: this.title,
            body: this.body
          },
          token: token
        }

        const response = await axios.post('https://fcm.googleapis.com/v1/projects/controlapp-18c8f/messages:send', message, {
          headers: {
            Authorization: `Bearer ${process.env.FCM_ACCESS_TOKEN}`,
            'Content-Type': 'application/json'
          }
        })

        console.log(response.data)
      } catch (error) {
        console.error(error)
      }
    }
  }